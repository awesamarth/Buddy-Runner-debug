var q=Object.defineProperty;var Q=(n,t,e)=>t in n?q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var u=(n,t,e)=>Q(n,typeof t!="symbol"?t+"":t,e);import{m as F,j as m,i as Z,a as tt,X as et}from"./privy-Br7drV1e.js";import{b as st,r as j,R as it}from"./vendor-C7A1SLig.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))h(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&h(g)}).observe(document,{childList:!0,subtree:!0});function e(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function h(a){if(a.ep)return;a.ep=!0;const d=e(a);fetch(a.href,d)}})();var N={},B=st;N.createRoot=B.createRoot,N.hydrateRoot=B.hydrateRoot;class at{constructor(t,e,h,a,d,g){u(this,"WALK_ANIMATION_TIMER",180);u(this,"walkAnimationTimer",this.WALK_ANIMATION_TIMER);u(this,"buddyRunImages",[]);u(this,"jumpPressed",!1);u(this,"jumpInProgress",!1);u(this,"falling",!1);u(this,"JUMP_SPEED",.65);u(this,"GRAVITY",.38);u(this,"dustParticles",[]);u(this,"showDust",!1);u(this,"dustTimer",0);u(this,"touchstart",()=>{this.jumpPressed=!0});u(this,"touchend",()=>{this.jumpPressed=!1});u(this,"keydown",t=>{t.code==="Space"&&(this.jumpPressed=!0)});u(this,"keyup",t=>{t.code==="Space"&&(this.jumpPressed=!1)});this.ctx=t,this.canvas=t.canvas,this.width=e,this.height=h,this.minJumpHeight=a,this.maxJumpHeight=d,this.scaleRatio=g,this.x=10*g,this.y=this.canvas.height-this.height-1.5*g,this.yStandingPosition=this.y,this.standingStillImage=new Image,this.standingStillImage.src="images/buddy_standing_still.png",this.image=this.standingStillImage,this.jumpingImage=new Image,this.jumpingImage.src="images/buddy_standing_still_eye_closed.png";const f=new Image;f.src="images/buddy_run1.png";const v=new Image;v.src="images/buddy_run2.png",this.buddyRunImages.push(f),this.buddyRunImages.push(v),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchend",this.touchend),window.addEventListener("touchstart",this.touchstart),window.addEventListener("touchend",this.touchend)}update(t,e){this.run(t,e),this.jumpInProgress&&(this.image=this.jumpingImage),this.jump(e),this.updateDust(e)}jump(t){this.jumpPressed&&(this.jumpInProgress=!0),this.jumpInProgress&&!this.falling?this.y>this.canvas.height-this.minJumpHeight||this.y>this.canvas.height-this.maxJumpHeight&&this.jumpPressed?this.y-=this.JUMP_SPEED*t*this.scaleRatio:this.falling=!0:this.y<this.yStandingPosition?(this.y+=this.GRAVITY*t*this.scaleRatio,this.y+this.height>this.canvas.height&&(this.y=this.yStandingPosition,this.createDustEffect())):(this.falling=!1,this.jumpInProgress=!1)}createDustEffect(){this.showDust=!0,this.dustTimer=300}updateDust(t){this.showDust&&(this.dustTimer-=t,this.dustTimer<=0&&(this.showDust=!1))}run(t,e){this.walkAnimationTimer<=0&&(this.image===this.buddyRunImages[0]?this.image=this.buddyRunImages[1]:this.image=this.buddyRunImages[0],this.walkAnimationTimer=this.WALK_ANIMATION_TIMER),this.walkAnimationTimer-=e*t}draw(){if(this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height),this.showDust){this.ctx.fillStyle="rgba(139, 69, 19, 0.6)";const t=this.yStandingPosition+this.height;for(let e=0;e<5;e++){const h=this.x+this.width*.2+e*8*this.scaleRatio,a=(3-e*.5)*this.scaleRatio;this.ctx.beginPath(),this.ctx.arc(h,t-a,a,0,Math.PI*2),this.ctx.fill()}}}}class nt{constructor(t,e,h,a,d){this.ctx=t,this.canvas=t.canvas,this.width=e,this.height=h,this.speed=a,this.scaleRatio=d,this.x=0,this.y=this.canvas.height-this.height,this.groundImage=new Image,this.groundImage.src="images/ground.png"}update(t,e){this.x-=t*e*this.speed*this.scaleRatio}draw(){this.ctx.fillStyle="#7BA428",this.ctx.fillRect(0,this.y,this.canvas.width,this.height),this.ctx.fillStyle="#6B9420";for(let t=0;t<this.canvas.width;t+=3)this.ctx.fillRect(t,this.y,1,this.height);this.ctx.fillStyle="#8B4513",this.ctx.fillRect(0,this.y+this.height*.7,this.canvas.width,this.height*.3),this.x<-this.width&&(this.x=0)}reset(){this.x=0}}class rt{constructor(t,e,h,a,d,g){this.ctx=t,this.x=e,this.y=h,this.width=a,this.height=d,this.image=g}update(t,e,h,a){this.x-=t*e*h*a}draw(){this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}collideWith(t){return t.x<this.x+this.width/1.4&&t.x+t.width/1.4>this.x&&t.y<this.y+this.height/1.4&&t.height+t.y/1.4>this.y}}class ot{constructor(t,e,h,a){u(this,"CARROT_INTERVAL_MIN",500);u(this,"CARROT_INTERVAL_MAX",2e3);u(this,"nextCarrotInterval",null);u(this,"carrots",[]);this.ctx=t,this.canvas=t.canvas,this.carrotImages=e,this.scaleRatio=h,this.speed=a,this.setNextCarrotTime()}setNextCarrotTime(){const t=this.getRandomNumber(this.CARROT_INTERVAL_MIN,this.CARROT_INTERVAL_MAX);this.nextCarrotInterval=t}getRandomNumber(t,e){return Math.floor(Math.random()*(e-t+1)+t)}createCarrot(){const t=this.getRandomNumber(0,this.carrotImages.length-1),e=this.carrotImages[t],h=this.canvas.width*1.5,a=this.canvas.height-e.height,d=new rt(this.ctx,h,a,e.width,e.height,e.image);this.carrots.push(d)}update(t,e){this.nextCarrotInterval<=0&&(this.createCarrot(),this.setNextCarrotTime()),this.nextCarrotInterval-=e,this.carrots.forEach(h=>{h.update(this.speed,t,e,this.scaleRatio)}),this.carrots=this.carrots.filter(h=>h.x>-h.width)}draw(){this.carrots.forEach(t=>t.draw())}collideWith(t){return this.carrots.some(e=>e.collideWith(t))}reset(){this.carrots=[]}}class ht{constructor(t,e){u(this,"score",0);u(this,"HIGH_SCORE_KEY","highScore");this.ctx=t,this.canvas=t.canvas,this.scaleRatio=e}update(t){this.score+=t*.01}reset(){this.score=0}setHighScore(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY));this.score>t&&localStorage.setItem(this.HIGH_SCORE_KEY,Math.floor(this.score))}draw(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY)),e=20*this.scaleRatio,h=20*this.scaleRatio;this.ctx.font=`${h}px serif`,this.ctx.fillStyle="#6B8E6B";const a=this.canvas.width-75*this.scaleRatio,d=a-125*this.scaleRatio,g=Math.floor(this.score).toString().padStart(6,0),f=t.toString().padStart(6,0);this.ctx.fillText(g,a,e),this.ctx.fillText(`HI ${f}`,d,e)}}const ct=()=>{const n=j.useRef(null),t=j.useRef({}),{user:e,authenticated:h}=F(),a=1,d=1e-5,g=800,f=200,v=88/1.5,w=94/1.5,y=f,x=150,D=2400,$=24,L=.5,U=[{width:48/1.5,height:100/1.5,image:"/images/carrot_1.png"},{width:98/1.5,height:100/1.5,image:"/images/carrot_2.png"},{width:68/1.5,height:70/1.5,image:"/images/carrot_3.png"}],M=()=>{if(!h||!e)return null;const o=()=>{var p;if((p=e==null?void 0:e.wallet)!=null&&p.address)return e.wallet.address;if(e!=null&&e.linkedAccounts){const s=e.linkedAccounts.find(I=>I.type==="wallet");return s==null?void 0:s.address}return null},i=()=>{var s,I;if((s=e==null?void 0:e.email)!=null&&s.address)return e.email.address;if((I=e==null?void 0:e.phone)!=null&&I.number)return e.phone.number;const p=o();return p?`${p.slice(0,6)}...${p.slice(-4)}`:"Player"};return{address:o(),identifier:i(),user:e}};return j.useEffect(()=>{const o=n.current;if(!o)return;const i=o.getContext("2d");let p;t.current={scaleRatio:null,previousTime:null,gameSpeed:a,gameOver:!1,hasAddedEventListenersForRestart:!1,waitingToStart:!0,player:null,ground:null,carrotController:null,score:null};const s=t.current;function I(){const r=v*s.scaleRatio,c=w*s.scaleRatio,l=x*s.scaleRatio,R=y*s.scaleRatio,_=D*s.scaleRatio,P=$*s.scaleRatio;s.player=new at(i,r,c,l,R,s.scaleRatio),s.ground=new nt(i,_,P,L,s.scaleRatio);const C=U.map(S=>{const A=new Image;return A.src=S.image,{image:A,width:S.width*s.scaleRatio,height:S.height*s.scaleRatio}});s.carrotController=new ot(i,C,s.scaleRatio,L),s.score=new ht(i,s.scaleRatio)}function T(){s.scaleRatio=z(),o.width=g*s.scaleRatio,o.height=f*s.scaleRatio,I()}function z(){const r=Math.min(window.innerHeight,document.documentElement.clientHeight),c=Math.min(window.innerWidth,document.documentElement.clientWidth);return c/r<g/f?c/g:r/f}function V(){const r=i.createLinearGradient(0,0,0,o.height);r.addColorStop(0,"#87CEEB"),r.addColorStop(.7,"#B0E0E6"),r.addColorStop(1,"#F0F8FF"),i.fillStyle=r,i.fillRect(0,0,o.width,o.height),i.fillStyle="rgba(255, 255, 255, 0.8)";const c=o.height*.2,l=20*s.scaleRatio;i.beginPath(),i.arc(o.width*.2,c,l,0,Math.PI*2),i.arc(o.width*.2+l*.5,c,l*.8,0,Math.PI*2),i.arc(o.width*.2+l,c,l*.6,0,Math.PI*2),i.fill(),i.beginPath(),i.arc(o.width*.7,c+l*.5,l*.7,0,Math.PI*2),i.arc(o.width*.7+l*.4,c+l*.5,l*.9,0,Math.PI*2),i.arc(o.width*.7+l*.8,c+l*.5,l*.5,0,Math.PI*2),i.fill()}function J(){const r=Math.floor(s.scaleRatio*70);i.font=`${r}px Verdana`,i.fillStyle="red",i.textAlign="center",i.fillText("GAME OVER",o.width/2,o.height/2-r);const c=Math.floor(s.scaleRatio*30);i.font=`${c}px Verdana`,i.fillStyle="black",i.fillText("Press any key or touch to restart",o.width/2,o.height/2+c);const l=M();if(l){const R=Math.floor(s.scaleRatio*20);i.font=`${R}px monospace`,i.fillStyle="#6B8E6B",i.fillText(`Player: ${l.identifier}`,o.width/2,o.height/2+c+R+10)}}function Y(){const r=Math.floor(s.scaleRatio*40);i.font=`${r}px Verdana`,i.fillStyle="black",i.textAlign="center",i.fillText("Press any key or touch to start",o.width/2,o.height/2);const c=M(),l=Math.floor(s.scaleRatio*20);i.font=`${l}px Verdana`,c?(i.fillStyle="#6B8E6B",i.fillText(`🔗 Connected as ${c.identifier}`,o.width/2,o.height/2+r+10)):(i.fillStyle="#8B7355",i.fillText("💳 Connect wallet in top-right corner",o.width/2,o.height/2+r+10))}function K(){s.hasAddedEventListenersForRestart||(s.hasAddedEventListenersForRestart=!0,setTimeout(()=>{const r=()=>{H(),document.removeEventListener("keyup",r),document.removeEventListener("touchstart",r)};document.addEventListener("keyup",r),document.addEventListener("touchstart",r)},1e3))}function H(){var r,c,l;s.hasAddedEventListenersForRestart=!1,s.gameOver=!1,s.waitingToStart=!1,(r=s.ground)==null||r.reset(),(c=s.carrotController)==null||c.reset(),(l=s.score)==null||l.reset(),s.gameSpeed=a}function X(r){s.gameSpeed+=r*d}function b(r){var l,R,_,P,C,S,A,O,k,W;if(s.previousTime===null){s.previousTime=r,p=requestAnimationFrame(b);return}const c=r-s.previousTime;s.previousTime=r,V(),!s.gameOver&&!s.waitingToStart&&((l=s.ground)==null||l.update(s.gameSpeed,c),(R=s.carrotController)==null||R.update(s.gameSpeed,c),(_=s.player)==null||_.update(s.gameSpeed,c),(P=s.score)==null||P.update(c),X(c)),!s.gameOver&&((C=s.carrotController)!=null&&C.collideWith(s.player))&&(s.gameOver=!0,K(),(S=s.score)==null||S.setHighScore()),(A=s.ground)==null||A.draw(),(O=s.carrotController)==null||O.draw(),(k=s.player)==null||k.draw(),(W=s.score)==null||W.draw(),s.gameOver&&J(),s.waitingToStart&&Y(),p=requestAnimationFrame(b)}T();const G=()=>setTimeout(T,500);window.addEventListener("resize",G),screen.orientation&&screen.orientation.addEventListener("change",T);const E=()=>{H(),document.removeEventListener("keyup",E),document.removeEventListener("touchstart",E)};return document.addEventListener("keyup",E),document.addEventListener("touchstart",E),p=requestAnimationFrame(b),()=>{p&&cancelAnimationFrame(p),window.removeEventListener("resize",G),screen.orientation&&screen.orientation.removeEventListener("change",T),document.removeEventListener("keyup",E),document.removeEventListener("touchstart",E)}},[h,e]),m.jsx("canvas",{ref:n,id:"game",style:{border:"3px solid #7FBC7F",borderRadius:"20px",boxShadow:"0 6px 20px rgba(127, 188, 127, 0.4)"}})},lt=()=>{const{user:n,authenticated:t,ready:e}=F(),{login:h}=Z(),{logout:a}=tt(),d=()=>{t?a():h()},g=w=>w?`${w.slice(0,6)}...${w.slice(-4)}`:"",f=()=>{var w;if((w=n==null?void 0:n.wallet)!=null&&w.address)return n.wallet.address;if(n!=null&&n.linkedAccounts){const y=n.linkedAccounts.find(x=>x.type==="wallet");return y==null?void 0:y.address}return null},v=()=>{var y,x;if((y=n==null?void 0:n.email)!=null&&y.address)return n.email.address;if((x=n==null?void 0:n.phone)!=null&&x.number)return n.phone.number;const w=f();return w?g(w):"Unknown User"};return e?m.jsxs("div",{className:"wallet-container",children:[m.jsx("button",{className:`wallet-button ${t?"connected":""}`,onClick:d,children:t?"Disconnect":"Connect Wallet"}),t&&m.jsxs("div",{className:"wallet-info",children:[m.jsx("div",{className:"wallet-status",children:"Connected"}),m.jsx("div",{className:"wallet-user",children:v()}),f()&&m.jsxs("div",{className:"wallet-address",children:["Wallet: ",g(f())]})]})]}):m.jsx("div",{className:"wallet-container",children:m.jsx("button",{className:"wallet-button",disabled:!0,children:"Loading..."})})},dt=()=>{const n="cme84q0og02aalc0bh9blzwa9",t={appearance:{theme:"light",accentColor:"#7FBC7F",logo:"https://your-logo-url.com/logo.png"},embeddedWallets:{createOnLogin:"users-without-wallets",noPromptOnSignature:!1},loginMethods:["email","wallet"],supportedChains:[{id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},{id:11155111,name:"Sepolia",network:"sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}}}]};return m.jsx(et,{appId:n,config:t,children:m.jsxs("div",{className:"app",children:[m.jsx(lt,{}),m.jsx("div",{className:"title",children:"🐰 Buddy's Great Carrot Adventure 🥕"}),m.jsx(ct,{}),m.jsxs("div",{className:"instructions",children:[m.jsx("p",{className:"main-instruction",children:"📱 Press SPACE or tap to make Buddy jump!"}),m.jsx("p",{className:"help-text",children:"Help our brave bunny Buddy hop over the giant carrots and achieve the highest score!"}),m.jsx("p",{className:"warning-text",children:"Watch out for those sneaky garden carrots!"})]})]})})};N.createRoot(document.getElementById("root")).render(m.jsx(it.StrictMode,{children:m.jsx(dt,{})}));
